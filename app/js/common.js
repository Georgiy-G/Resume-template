$(function(){var equalBoolean=!0;$(".burger-menu").click(function(){$(".navigation li").slideToggle()}),$(".nds-calculator__form li:last-child").click(function(t){t.preventDefault(),$(".nds-calculator__form li").removeClass("active"),$(this).addClass("active"),$(".nds-calculator__result1").hide(),$(".nds-calculator__result2").show()}),$(".nds-calculator__form li:first-child").click(function(t){t.preventDefault(),$(".nds-calculator__form li").removeClass("active"),$(this).addClass("active"),$(".nds-calculator__result2").hide(),$(".nds-calculator__result1").show()}),$(".calculator__key").click(function(){1==equalBoolean?$("#calc__display").val($("#calc__display").val()+$(this).attr("value")):$("#calc__display").val($(this).attr("value")),equalBoolean=!0}),$(".calculator__clear").click(function(){$("#calc__display").val("")}),$(".calculator__operator").click(function(){0!=$("#calc__display").val()&&"+"!=$("#calc__display").val().charAt($("#calc__display").val().length-1)&&"-"!=$("#calc__display").val().charAt($("#calc__display").val().length-1)&&"*"!=$("#calc__display").val().charAt($("#calc__display").val().length-1)&&"/"!=$("#calc__display").val().charAt($("#calc__display").val().length-1)&&"."!=$("#calc__display").val().charAt($("#calc__display").val().length-1)&&$("#calc__display").val($("#calc__display").val()+$(this).attr("value"))}),$(".calculator_point").click(function(){""==$("#calc__display").val()&&$("#calc__display").val("0."),"+"==$("#calc__display").val().charAt($("#calc__display").val().length-1)||"-"==$("#calc__display").val().charAt($("#calc__display").val().length-1)||"*"==$("#calc__display").val().charAt($("#calc__display").val().length-1)||"/"==$("#calc__display").val().charAt($("#calc__display").val().length-1)||"."==$("#calc__display").val().charAt($("#calc__display").val().length-1)||$("#calc__display").val().substring($("#calc__display").val().lastIndexOf("+")+1).indexOf(".")!=-1&&$("#calc__display").val().substring($("#calc__display").val().lastIndexOf("-")+1).indexOf(".")!=-1&&$("#calc__display").val().substring($("#calc__display").val().lastIndexOf("*")+1).indexOf(".")!=-1&&$("#calc__display").val().substring($("#calc__display").val().lastIndexOf("/")+1).indexOf(".")!=-1||$("#calc__display").val($("#calc__display").val()+$(this).attr("value"))}),$(".calculator__delete").click(function(){$("#calc__display").val($("#calc__display").val().substring(0,$("#calc__display").val().length-1))}),$(".calculator__sign").click(function(){"-"!=$("#calc__display").val().charAt($("#calc__display").val().length-1)?$("#calc__display").val($("#calc__display").val()+"-"):$("#calc__display").val($("#calc__display").val().substring(0,$("#calc__display").val().length-1))}),$(".calculator__equal").click(function(){equalBoolean=!1,eval($("#calc__display").val())>1?$("#calc__display").val(eval($("#calc__display").val())):$("#calc__display").val(eval($("#calc__display").val()).toFixed(2))}),$(".nds-calculator__result input").click(function(){$(this).select()}),$("#nds-calculator__sum1").on("input",function(){$(".result__sum1").html(parseInt($("#nds-calculator__sum1").val())*parseInt($("#nds-calculator__percent1").val())/100),$(".result__sumall1").html(parseInt($("#nds-calculator__sum1").val())*(parseInt($("#nds-calculator__percent1").val())+100)/100)}),$("#nds-calculator__percent1").on("input",function(){$(".result__sum1").html(parseInt($("#nds-calculator__sum1").val())*parseInt($("#nds-calculator__percent1").val())/100),$(".result__sumall1").html(parseInt($("#nds-calculator__sum1").val())*(parseInt($("#nds-calculator__percent1").val())+100)/100)}),$("#nds-calculator__sum2").on("input",function(){$(".result__sum2").html((parseInt($("#nds-calculator__sum2").val())*(1-1/(parseInt($("#nds-calculator__percent2").val())/100+1))).toFixed(2)),$(".result__sumall2").html((parseInt($("#nds-calculator__sum2").val())/(parseInt($("#nds-calculator__percent2").val())/100+1)).toFixed(2))}),$("#nds-calculator__percent2").on("input",function(){$(".result__sum2").html((parseInt($("#nds-calculator__sum2").val())*(1-1/(parseInt($("#nds-calculator__percent2").val())/100+1))).toFixed(2)),$(".result__sumall2").html((parseInt($("#nds-calculator__sum2").val())/(parseInt($("#nds-calculator__percent2").val())/100+1)).toFixed(2))}),$(".button_ok1").click(function(){$(this).closest("p").siblings(".main__block__inline").children(".result").html(parseInt($(this).siblings("#percent-calculator__input1").val())*parseInt($(this).siblings(".mobile-block").children("#percent-calculator__input2").val())/100)}),$(".button_ok2").click(function(){$(this).closest("p").siblings(".main__block__inline").children(".result").html(parseInt($(this).siblings("#percent-calculator__input1").val())/parseInt($(this).siblings(".mobile-block").children("#percent-calculator__input2").val())*100)}),$(".button_ok3").click(function(){$(this).closest("p").siblings(".main__block__inline").children(".result").html((parseInt($(this).siblings("#percent-calculator__input1").val())+100)*parseInt($(this).siblings(".mobile-block").children("#percent-calculator__input2").val())/100)}),$(".button_ok4").click(function(){$(this).closest("p").siblings(".main__block__inline").children(".result").html((100-parseInt($(this).siblings("#percent-calculator__input1").val()))*parseInt($(this).siblings(".mobile-block").children("#percent-calculator__input2").val())/100)}),$(".button_ok").click(function(){$(this).closest("p").siblings(".main__block__inline").children(".vallInput1").html($(this).siblings("#percent-calculator__input1").val()),$(this).closest("p").siblings(".main__block__inline").children(".vallInput2").html($(this).siblings(".mobile-block").children("#percent-calculator__input2").val()),""!=$(this).siblings("#percent-calculator__input1").val()&&""!=$(this).siblings(".mobile-block").children("#percent-calculator__input2").val()||($(this).closest("p").siblings(".main__block__inline").find(".vallInput1").html("0"),$(this).closest("p").siblings(".main__block__inline").find(".vallInput2").html("0"),$(this).closest("p").siblings(".main__block__inline").find(".result").html("0"))});var buttons=[["sin","asin","pi","mc","mr","mplus","mminus"],["cos","acos","e","sqrt","seven","eight","nine"],["tg","atg","supsqrt","supsqr","four","five","six"],["ctg","actg","sqr","plusminus","one","two","three"],["log","log2x","10sup","percent","zero","2zero","dot"],["ln","logyx","1delx","plus","minus","umnj","del"],["colspan3","ravno","bspace","ac","c"]],txt=[["sin","arcsin","&prod;","MC","MR","M+","M-"],["cos","arccos","e","&radic;X","7","8","9"],["tg","arctg","<sup>y</sup>&radic;X","X<sup>y</sup>","4","5","6"],["ctg","arcctg","X<sup>2</sup>","&plusmn;","1","2","3"],["lgX","log<sub>2</sub>X","10<sup>x</sup>","%","0","00","."],["lnX","log<sub>y</sub>X","1&divide;x","+","-","&times;","&divide;"],['<label class="labelactive"><input type="radio" checked name="rad" value="0" /> Градусы</label> <label><input type="radio" name="rad" value="1" /> Радианы</label>',"=","DEL","AC","C"]],go=["bspace","ac","c","mminus","mplus","mc","mr","plusminus","sqrt","pi","sqr","10sup","1delx","log","ln","log2x"],go2=["sin","asin","cos","acos","tg","atg","ctg","actg"],table='<table border="0" cellspacing="0" cellpadding="4"><tbody>',cl="",saved=0,action="",current=0,current2=0,flag=0,ok=0,rad=0,calc_actions={plus:function(){return $("#txt").html(current+" + "+current2+" = "+(current+current2)),current+current2},minus:function(){return $("#txt").html(current+" - "+current2+" = "+(current-current2)),current-current2},umnj:function(){return $("#txt").html(current+" &times; "+current2+" = "+current*current2),current*current2},del:function(){return $("#txt").html(current+" &divide; "+current2+" = "+current/current2),current/current2},supsqr:function(){return $("#txt").html(current+"<sup>"+current2+"</sup> = "+Math.pow(current,current2)),Math.pow(current,current2)},sqrt:function(){current=2==flag?Math.sqrt(current2):Math.sqrt(current),current2=0,flag=0,action="",$("#txt").html("&radic;"+Math.pow(current,2)+" = "+current),$("#tablo").val(current)},percent:function(){return"plus"==action||"minus"==action?(it=current*current2/100,"plus"==action?(it=current+it,$("#txt").html(current+" + (("+current+" * "+current2+")/100) = "+it)):(it=current-it,$("#txt").html(current+" - (("+current+" * "+current2+")/100) = "+it))):(it=100*current2/current,$("#txt").html("("+current2+" * 100)/"+current+" = "+it)),it},sin:function(t){return 0==rad?deg="&deg;":deg="",0==flag?y=current:y=current2,$("#txt").html("sin("+y+deg+") = "+Math.sin(t)),Math.sin(t)},asin:function(t){return 0==rad?deg="&deg;":deg="",0==flag?y=current:y=current2,$("#txt").html("arcsin("+y+deg+") = "+Math.asin(t)),Math.asin(t)},cos:function(t){return 0==rad?deg="&deg;":deg="",0==flag?y=current:y=current2,$("#txt").html("cos("+y+deg+") = "+Math.cos(t)),Math.cos(t)},acos:function(t){return 0==rad?deg="&deg;":deg="",0==flag?y=current:y=current2,$("#txt").html("arccos("+y+deg+") = "+Math.acos(t)),Math.acos(t)},tg:function(t){return 0==rad?deg="&deg;":deg="",0==flag?y=current:y=current2,$("#txt").html("tg("+y+deg+") = "+Math.tan(t)),Math.tan(t)},atg:function(t){return 0==rad?deg="&deg;":deg="",0==flag?y=current:y=current2,$("#txt").html("arctg("+y+deg+") = "+Math.atan(t)),Math.atan(t)},ctg:function(t){return 0==rad?deg="&deg;":deg="",0==flag?y=current:y=current2,$("#txt").html("ctg("+y+deg+") = "+Math.sin(t)/Math.cos(t)),Math.sin(t)/Math.cos(t)},actg:function(t){return 0==rad?deg="&deg;":deg="",0==flag?y=current:y=current2,$("#txt").html("arcctg("+y+deg+") = "+Math.PI/2-Math.atan(t)),Math.PI/2-Math.atan(t)},sqr:function(){return 2==flag?it=Math.pow(current2,2):it=Math.pow(current,2),2==flag?$("#txt").html(current2+"<sup>2</sup> = "+Math.pow(current2,2)):$("#txt").html(current+"<sup>2</sup> = "+Math.pow(current,2)),current=it,current2=0,action="",flag=0,$("#tablo").val(it),it},supsqrt:function(){return $("#txt").html("<sup>"+current2+"</sup>&radic;"+current+" = "+Math.pow(current,1/parseFloat(current2))),Math.pow(current,1/parseFloat(current2))},"10sup":function(){return 2==flag?it=Math.pow(10,current2):it=Math.pow(10,current),2==flag?$("#txt").html("10<sup>"+current2+"</sup> = "+Math.pow(10,current2)):$("#txt").html("10<sup>"+current+"</sup> = "+Math.pow(10,current)),current=it,current2=0,action="",flag=0,$("#tablo").val(it),it},"1delx":function(){return 2==flag?it=1/current2:it=1/current,2==flag?$("#txt").html("1/"+current2+" = "+it):$("#txt").html("1/"+current+" = "+it),current=it,current2=0,action="",flag=0,$("#tablo").val(it),it},log:function(){return 2==flag?it=Math.log(current2)/Math.log(10):it=Math.log(current)/Math.log(10),2==flag?$("#txt").html("log<sub>10</sub>"+current2+" = "+it):$("#txt").html("log<sub>10</sub>"+current2+" = "+it),current=it,current2=0,action="",flag=0,$("#tablo").val(it),it},log2x:function(){return 2==flag?it=Math.log(current2)/Math.log(2):it=Math.log(current)/Math.log(2),2==flag?$("#txt").html("log<sub>2</sub>"+current2+" = "+it):$("#txt").html("log<sub>2</sub>"+current+" = "+it),current=it,current2=0,action="",flag=0,$("#tablo").val(it),it},logyx:function(){return $("#txt").html("log<sub>"+current2+"</sub>"+current+" = "+Math.log(current)/Math.log(current2)),Math.log(current)/Math.log(current2)},ln:function(){return 2==flag?it=Math.log(current2):it=Math.log(current),2==flag?$("#txt").html("ln"+current2+" = "+it):$("#txt").html("ln"+current+" = "+it),current=it,current2=0,action="",flag=0,$("#tablo").val(it),it},mc:function(){saved=0,2==flag?it=current2:it=current,$("#tablo").val(it)},mplus:function(){2==flag?(current2=Math.abs(current2),saved=current2):(current=Math.abs(current),saved=current),$("#tablo").val(saved)},mminus:function(){2==flag?(current2=-1*Math.abs(current2),saved=current2):(current=-1*Math.abs(current),saved=current),$("#tablo").val(saved)},ac:function(){current=0,current2=0,saved=0,action="",flag=0,$("#tablo").val(0)},c:function(){current=0,current2=0,action="",flag=0,$("#tablo").val(0)},mr:function(){1==flag||2==flag?(current2=saved,1==flag&&flag++):current=saved,$("#tablo").val(saved)},plusminus:function(){2==flag?(current2=current2>0?-1*Math.abs(current2):Math.abs(current2),it=current2):(current=current>0?-1*Math.abs(current):Math.abs(current),it=current),$("#tablo").val(it)},bspace:function(){1==flag||2==flag?(current2=parseFloat(current2.toString().slice(0,-1)),isNaN(current2)&&(current2=0),$("#tablo").val(current2)):(current=parseFloat(current.toString().slice(0,-1)),isNaN(current)&&(current=0),$("#tablo").val(current))}};for(i=0;i<buttons.length;i++){for(table+="<tr>",j=0;j<buttons[i].length;j++)cl=i<buttons.length-1&&j<3?"inj":"grey",($.isNumeric(txt[i][j])||"."==txt[i][j])&&(cl="number"),(i==buttons.length-2&&j>2||i==buttons.length-1&&1==j)&&(cl="orange"),i==buttons.length-1&&j>1&&(cl="red"),""==txt[i][j]&&(cl=""),table+="colspan3"==buttons[i][j]?'<td colspan="3" id="button-'+buttons[i][j]+'" class="nobutton" data-index="'+buttons[i][j]+'">'+txt[i][j]+"</td>":'<td id="button-'+buttons[i][j]+'" class="'+cl+'" data-index="'+buttons[i][j]+'">'+txt[i][j]+"</td>";table+="</tr>"}table+="</tbody></table>",$("#calculator").append(table),$("#calculator table tbody tr td").click(function(){var t=$(this).attr("data-index");if($.isNumeric($(this).html())||"pi"==t||"e"==t||"dot"==t)0==flag?("pi"==t?current=Math.PI:"e"==t?current=Math.E:"dot"==t?$("#tablo").val().indexOf(".")==-1&&(current=0==parseFloat($("#tablo").val())?"0.":$("#tablo").val()+"."):current=0==parseFloat($("#tablo").val())?parseFloat($(this).html()):parseFloat($("#tablo").val()+""+$(this).html()),$("#tablo").val(current)):(1==flag&&($("#tablo").val(0),flag++),"pi"==t?current2=Math.PI:"e"==t?current2=Math.E:"dot"==t?$("#tablo").val().indexOf(".")==-1&&(current2=0==parseFloat($("#tablo").val())?"0.":$("#tablo").val()+"."):current2=0==parseFloat($("#tablo").val())?parseFloat($(this).html()):parseFloat($("#tablo").val()+""+$(this).html()),$("#tablo").val(current2));else{for(i=0;i<go.length;i++)if(go[i]==t){ok=1;break}if(1==ok)calc_actions[t](),ok=0;else if(2!=flag||""==action||"ravno"!=t&&"percent"!=t){for(i=0;i<go2.length;i++)if(go2[i]==t){ok=1;break}1==ok?(current=0==rad?0==flag?calc_actions[t](Math.PI/180*current):calc_actions[t](Math.PI/180*current2):0==flag?calc_actions[t](current):calc_actions[t](current2),ok=0,flag=0,action="",current2=0,$("#tablo").val(current)):(action=t,0==flag&&flag++)}else current="percent"==t?calc_actions[t]():calc_actions[action](),flag=0,action="",current2=0,$("#tablo").val(current)}}),$(".nobutton label input[name=rad]").change(function(){rad=parseInt($(this).val(),10),$(".nobutton label").removeClass(),$(this).parent("label").addClass("labelactive")}),$("#button-ravno, .inj").click(function(){equalButton=!1}),$(".number").click(function(){equalButton||$("#tablo").val($(this).html()),equalButton=!0}),$("#tablo").click(function(){$(this).select()})});